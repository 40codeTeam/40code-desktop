(window.webpackJsonpGUI=window.webpackJsonpGUI||[]).push([[9],{1836:function(t,e,n){"use strict";n.r(e),n.d(e,"resources",(function(){return o}));const o={"userscript.js":async function(t){let{addon:e,console:n,msg:o}=t;const l=await e.tab.traps.getBlockly();function a(){let t=document.createElement("style");t.textContent="\n    .blocklyText {\n        fill: ".concat(l.Colours.text,';\n        font-family: "Helvetica Neue", Helvetica, sans-serif;\n        font-size: 12pt;\n        font-weight: 500;\n    }\n    .blocklyNonEditableText>text, .blocklyEditableText>text {\n        fill: ').concat(l.Colours.textFieldText,";\n    }\n    .blocklyDropdownText {\n        fill: ").concat(l.Colours.text," !important;\n    }\n    ");for(let e of document.querySelectorAll(".scratch-addons-style[data-addons*='editor-theme3']"))e.disabled||(t.textContent+=e.textContent);return t}function c(t){for(let e of document.documentElement.style)e.startsWith("--editorTheme3-")&&t.style.setProperty(e,document.documentElement.style.getPropertyValue(e))}let r=document.createElementNS("http://www.w3.org/2000/svg","svg");async function i(t,e){let n;n=e?function(t,e){let n=r.cloneNode(),o=e.svgGroup_;o=o.cloneNode(!0);let l=o.getAttribute("data-shapes"),i=0;const s=t?2:1;"c-block c-1 hat"===l&&(i=20);"hat"===l&&(i=16,e.CAT_BLOCKS&&(i+=16));return o.setAttribute("transform","translate(0,".concat(s*i,") scale(").concat(s,")")),c(n),n.append(a()),n.append(o),n}(t,e):function(t){let e=r.cloneNode(),n=document.querySelector("svg.blocklySvg g.blocklyBlockCanvas");n=n.cloneNode(!0);let o=[],l=[];return n.childNodes.forEach((e=>{let n=e.getAttribute("transform").match(/translate\((.*?),(.*?)\)/)[1]||0,a=e.getAttribute("transform").match(/translate\((.*?),(.*?)\)/)[2]||0;o.push(n*(t?2:1)),l.push(a*(t?2:1)),e.style.display=""})),n.setAttribute("transform","translate(".concat(-Math.min(...o),",").concat(-Math.min(...l)+18*(t?2:1),") ").concat(t?"scale(2)":"")),c(e),e.append(a()),e.append(n),e}(t),n.querySelectorAll("text").forEach((t=>{t.innerHTML=t.innerHTML.replace(/&nbsp;/g," ")})),await Promise.all(Array.from(n.querySelectorAll("image")).map((async t=>{const e=t.getAttribute("xlink:href");if(e.startsWith("data:"))return;const n=await(await fetch(e)).blob(),o=new FileReader,l=await new Promise((t=>{o.addEventListener("load",(()=>t(o.result))),o.readAsDataURL(n)}));t.setAttribute("xlink:href",l)}))),t?function(t){const e=new XMLSerializer,n=document.createElement("iframe");document.body.append(n),n.contentDocument.write(e.serializeToString(t));let{width:o,height:l}=n.contentDocument.body.querySelector("svg g").getBoundingClientRect();t.setAttribute("width",o+"px"),t.setAttribute("height",l+"px");let a=document.createElement("canvas"),c=a.getContext("2d"),r=document.createElement("img");r.setAttribute("src","data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.serializeToString(t))))),r.onload=function(){a.height=r.height,a.width=r.width,c.drawImage(r,0,0,r.width,r.height);let t=a.toDataURL("image/png"),e=document.createElement("a");const o=new Date,l="".concat(o.toLocaleDateString(),"-").concat(o.toLocaleTimeString());e.download="block_".concat(l,".png"),e.href=t,e.click(),n.remove()}}(n):function(t){const e=document.createElement("a");document.body.appendChild(e);const n=new Blob([t],{type:"text"}),o=window.URL.createObjectURL(n);e.href=o;const l=new Date,a="".concat(l.toLocaleDateString(),"-").concat(l.toLocaleTimeString());e.download="block_".concat(a,".svg"),e.click(),window.URL.revokeObjectURL(o),document.body.removeChild(e)}((new XMLSerializer).serializeToString(n))}r.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1"),e.tab.createBlockContextMenu((t=>{var n,l;if(e.self.disabled)return t;let a=document.querySelector("svg.blocklySvg g.blocklyBlockCanvas");const c=t.findIndex((t=>t._isDevtoolsFirstItem)),r=-1!==c?c:t.length;return t.splice(r,0,{enabled:!(null==a||null===(n=a.childNodes)||void 0===n||!n.length),text:o("export_all_to_SVG"),callback:()=>{i(!1)},separator:!0},{enabled:!(null==a||null===(l=a.childNodes)||void 0===l||!l.length),text:o("export_all_to_PNG"),callback:()=>{i(!0)},separator:!1}),t}),{workspace:!0}),e.tab.createBlockContextMenu(((t,n)=>{if(e.self.disabled)return t;const l=t.findIndex((t=>t._isDevtoolsFirstItem)),a=-1!==l?l:t.length;return t.splice(a,0,{enabled:!0,text:o("export_selected_to_SVG"),callback:()=>{i(!1,n)},separator:!0},{enabled:!0,text:o("export_selected_to_PNG"),callback:()=>{i(!0,n)},separator:!1}),t}),{blocks:!0})}}}}]);