(window.webpackJsonpGUI=window.webpackJsonpGUI||[]).push([[41],{1761:function(t,e,o){(t.exports=o(11)(!1)).push([t.i,'.sa-paint-snap-button {\n  position: relative;\n}\n.sa-paint-snap-button:focus-within {\n  background-color: hsla(0, 100%, 65%, 0.2);\n}\n.sa-paint-snap-button[data-enabled="true"] .sa-paint-snap-image {\n  filter: brightness(0) invert(1);\n}\n.sa-paint-snap-button[data-enabled="true"] {\n  background-color: #ff4c4c;\n}\n\n.sa-paint-snap-group {\n  position: relative;\n  flex-direction: row;\n}\n\n.sa-paint-snap-settings-wrapper {\n  position: absolute;\n  justify-items: center;\n  left: 50%;\n  width: 1.95rem;\n  height: 1.95rem;\n  display: grid;\n}\n\n.sa-paint-snap-settings {\n  position: absolute;\n  bottom: 100%;\n  /* based on the styles for the color dropdown */\n  padding: 4px;\n  border-radius: 4px;\n  border: 1px solid var(--paint-ui-pane-border, #ddd);\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.3);\n  transition-property: bottom, opacity;\n  transition-duration: 500ms;\n  transition-timing-function: cubic-bezier(0.23, 1, 0.32, 1);\n  opacity: 0;\n  pointer-events: none;\n  background: var(--ui-primary, white);\n  min-height: 100%;\n  min-width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25em;\n}\n.sa-paint-snap-settings[data-visible="true"] {\n  bottom: calc(100% + 22px);\n  pointer-events: auto;\n  opacity: 1;\n}\n\n.sa-paint-snap-settings-line {\n  display: flex;\n  justify-content: flex-end;\n  align-items: baseline;\n}\n\n.sa-paint-snap-settings-input {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  text-align: center;\n  border: 0;\n  background: transparent;\n  -moz-appearance: textfield;\n  border: 0;\n  outline: 0;\n}\n\n.sa-paint-snap-settings-input::-webkit-outer-spin-button,\n.sa-paint-snap-settings-input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\n.sa-paint-snap-settings-tip {\n  position: absolute;\n  bottom: 0;\n  transform: translateY(100%);\n  right: calc(50% - 7px);\n}\n.sa-paint-snap-settings-polygon {\n  fill: var(--ui-primary, white);\n  stroke: var(--paint-ui-pane-border, #ddd);\n}\n\n.sa-paint-snap-settings-separator {\n  flex-grow: 1;\n  border-bottom: 1px solid currentColor;\n  margin: 4px;\n  opacity: 0.25;\n}\n\n.sa-paint-snap-settings-section {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25em;\n  align-items: flex-end;\n  width: 100%;\n}\n\n.sa-paint-snap-settings-section-title {\n  font-size: 1.2em;\n  font-weight: 500;\n  align-self: flex-start;\n  margin-left: 4px;\n}\n\n.sa-paint-snap-settings-label {\n  white-space: nowrap;\n}\n\n.sa-paint-snap-image[data-shrink="true"] {\n  height: 1em;\n  width: 1em;\n}\n',""])},1807:function(t,e,o){"use strict";o.r(e),o.d(e,"resources",(function(){return E}));let n=!0;const i={pageEdges:!0,pageCenter:!0,pageAxes:!0,pageCorners:!1,objectEdges:!0,objectCenters:!0,objectMidlines:!0,objectCorners:!1},a={boxCenter:!0,boxCorners:!1,boxEdgeMids:!1};let s,r=10;function l(t,e){i[t]=!!e}function c(t,e){a[t]=!!e}function d(t){r=t}function p(){n=!0}function u(){n=!1}function m(t){t?p():u()}function g(t){s=t}function b(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function h(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?b(Object(o),!0).forEach((function(e){y(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function y(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function v(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function f(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?v(Object(o),!0).forEach((function(e){w(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):v(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function w(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function M(t){const e=function(e){for(const o of t.project.layers)if(o.data&&o.data[e])return o},o=new t.Point(480,360),n=new t.Rectangle(0,0,960,720),i=new t.Rectangle(-240,-180,1440,1080);return{math:{checkPointsClose:function(t,e,o){const n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return n<o&&i<o},snapDeltaToAngle:function(e,o){let n=Math.atan2(e.y,e.x);n=Math.round(n/o)*o;const i=Math.cos(n),a=Math.sin(n),s=i*e.x+a*e.y;return new t.Point(i*s,a*s)}},layer:{CROSSHAIR_FULL_OPACITY:.75,getDragCrosshairLayer:function(){return e("isDragCrosshairLayer")},getLayer:e},view:{CENTER:o,ART_BOARD_BOUNDS:n,MAX_WORKSPACE_BOUNDS:i,getActionBounds:e=>e?n:t.view.bounds.unite(n).intersect(i)},guide:{hoverBounds:function(o,n){let i=o.internalBounds;n&&(i=i.expand(n));const a=new t.Path.Rectangle(i);return a.matrix=o.matrix,function(e){e.strokeWidth=1/t.view.zoom,e.opacity=1,e.blendMode="normal",e.guide=!0}(a),a.parent=e("isGuideLayer"),a.strokeColor="#009dec",a.fillColor=null,a.data.isHelperItem=!0,a.data.origItem=o,a.bringToFront(),a}}}}const I=t=>Object.fromEntries(Object.entries(t).map(([t])=>[t,t])),x={BRUSH:null,ERASER:null,LINE:null,FILL:null,SELECT:null,RESHAPE:null,OVAL:null,RECT:null,ROUNDED_RECT:null,TEXT:null},j={BIT_BRUSH:null,BIT_LINE:null,BIT_OVAL:null,BIT_RECT:null,BIT_TEXT:null,BIT_FILL:null,BIT_ERASER:null,BIT_SELECT:null},N=(I(x),I(j)),L=I(f(f({},x),j)),S=(I({FILL:null,SELECT:null,RESHAPE:null,OVAL:null,RECT:null,LINE:null,BIT_OVAL:null,BIT_RECT:null,BIT_SELECT:null,BIT_FILL:null}),(t,e)=>{const o=M(t),{math:{checkPointsClose:l,snapDeltaToAngle:c},view:{getActionBounds:d,CENTER:p},layer:{getDragCrosshairLayer:u,CROSSHAIR_FULL_OPACITY:m,getLayer:g},guide:{hoverBounds:b}}=o,y=(t=>t.boundingBoxTool._modeMap.MOVE)(e);let v=new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s),strokeWidth:1/t.view.zoom,visible:!1,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1});const f={shadow:null,circle:null},w=new t.Group({children:[],visible:!1});let I;v.remove(),w.remove();let x;function j(e){var n,y;const M=e.point,j=d(this.mode in N);M.x=Math.max(j.left,Math.min(M.x,j.right)),M.y=Math.max(j.top,Math.min(M.y,j.bottom));const S=M.subtract(e.downPoint),C=r/t.view.zoom;let P;if(0===this.selectedItems.length)return;const z=this.selectionCenter._owner,T=this.selectionCenter.add(S),D=null!==(n=null===(y=g("isGuideLayer").children.find(t=>t.data.isSelectionBound))||void 0===y?void 0:y.selectionAnchor)&&void 0!==n?n:{},O=()=>{D.strokeColor=new t.Color(.30196078431372547,.592156862745098,1),D.fillColor=null};if(x=()=>{var t;v.remove(),w.remove(),w.visible=!1,v.visible=!1,null===(t=I)||void 0===t||t.remove(),I&&(I.visible=!1),O()},x(),!e.modifiers.shift&&this.mode!==L.RESHAPE){const e=g("isPaintingLayer"),n=function(t,e,o,n){const{view:{CENTER:s,ART_BOARD_BOUNDS:r}}=o;return{from:h(h(h({},a.boxCenter?{center:e.center}:{}),a.boxCorners?{topLeft:e.topLeft,topRight:e.topRight,bottomLeft:e.bottomLeft,bottomRight:e.bottomRight}:{}),a.boxEdgeMids?{left:new t.Point(e.left,e.center.y),right:new t.Point(e.right,e.center.y),top:new t.Point(e.center.x,e.top),bottom:new t.Point(e.center.x,e.bottom)}:{}),to:h(h(h(h(h(h(h(h({},i.pageCenter?{bounds_c:{type:"point",value:s}}:{}),i.pageAxes?{bounds_cx:{type:"xcoord",value:s.x},bounds_cy:{type:"ycoord",value:s.y}}:{}),i.pageEdges?{bounds_l:{type:"xcoord",value:r.left,clamp:{min:r.top,max:r.bottom}},bounds_r:{type:"xcoord",value:r.right,clamp:{min:r.top,max:r.bottom}},bounds_t:{type:"ycoord",value:r.top,clamp:{min:r.left,max:r.right}},bounds_b:{type:"ycoord",value:r.bottom,clamp:{min:r.left,max:r.right}},bounds_lc:{type:"point",value:new t.Point(r.left,s.y)},bounds_rc:{type:"point",value:new t.Point(r.right,s.y)},bounds_tc:{type:"point",value:new t.Point(s.x,r.top)},bounds_bc:{type:"point",value:new t.Point(s.x,r.bottom)}}:{}),i.pageCorners?{bounds_tl:{type:"point",value:r.topLeft},bounds_tr:{type:"point",value:r.topRight},bounds_bl:{type:"point",value:r.bottomLeft},bounds_br:{type:"point",value:r.bottomRight}}:{}),i.objectEdges?Object.fromEntries(n.filter(t=>!(t.selected||t.data.isHelperItem)).map(t=>[["item_".concat(t.id,"_r"),{type:"itemSideVert",value:t.bounds.right,clamp:{min:t.bounds.top,max:t.bounds.bottom}}],["item_".concat(t.id,"_l"),{type:"itemSideVert",value:t.bounds.left,clamp:{min:t.bounds.top,max:t.bounds.bottom}}],["item_".concat(t.id,"_t"),{type:"itemSideHoriz",value:t.bounds.top,clamp:{min:t.bounds.left,max:t.bounds.right}}],["item_".concat(t.id,"_b"),{type:"itemSideHoriz",value:t.bounds.bottom,clamp:{min:t.bounds.left,max:t.bounds.right}}]]).flat(1)):{}),i.objectCenters?Object.fromEntries(n.filter(t=>!t.selected).map(t=>[["item_".concat(t.id,"_c"),{type:"point",value:t.bounds.center}]]).flat(1)):{}),i.objectMidlines?Object.fromEntries(n.filter(t=>!t.selected).map(t=>[["item_".concat(t.id,"_cx"),{type:"xcoord",value:t.bounds.center.x}],["item_".concat(t.id,"_cy"),{type:"ycoord",value:t.bounds.center.y}]]).flat(1)):{}),i.objectCorners?Object.fromEntries(n.filter(t=>!(t.selected||t.data.isHelperItem)).map(t=>[["item_".concat(t.id,"_tl"),{type:"point",value:t.bounds.topLeft}],["item_".concat(t.id,"_tr"),{type:"point",value:t.bounds.topRight}],["item_".concat(t.id,"_bl"),{type:"point",value:t.bounds.bottomLeft}],["item_".concat(t.id,"_br"),{type:"point",value:t.bounds.bottomRight}]]).flat(1)):{})}}(t,z,o,e.children),r=n.from,c=n.to,d=e=>(e.clamp||(e.clamp={min:-1/0,max:1/0}),"point"===e.type?()=>e.value:"xcoord"===e.type||"itemSideVert"===e.type?o=>new t.Point(e.value,Math.min(Math.max(o.y,e.clamp.min),e.clamp.max)):"ycoord"===e.type||"itemSideHoriz"===e.type?o=>new t.Point(Math.min(Math.max(o.x,e.clamp.min),e.clamp.max),e.value):"generator"===e.type?e.value:void 0),p=t=>Object.fromEntries(Object.entries(c).map(([e,o])=>[e,{type:o.type,point:d(o)(t)}])),u=Object.entries(r).map(([t,e])=>({pointPos:t,origPoint:e,point:e.add(S),snapPoints:p(e.add(S))})),m=["point","itemSideVert","itemSideHoriz","xcoord","ycoord","generated",void 0],y=(t,e)=>{const o=m.indexOf(t.snapPointType)-m.indexOf(e.snapPointType);return o||t.distance-e.distance},M=u.map(({point:t,origPoint:e,snapPoints:o})=>{var n,i;const a=Object.entries(o).filter(([e,o])=>l(t,o.point,C)).map(([e,o])=>{return{pos:e,distance:(n=o.point,i=t,n.getDistance(i)),snapPointType:o.type};var n,i}).sort(y)[0]||{pos:"",distance:1/0};return{point:e,snapPoint:null===(n=o[a.pos])||void 0===n?void 0:n.point,snapPointType:null===(i=o[a.pos])||void 0===i?void 0:i.type,distance:a.distance,pos:a.pos}}).sort(y).sort(y)[0];if(x(),null!=M&&M.snapPoint){var E;f.shadow=new t.Path.Circle({center:new t.Point(0,0),radius:5.5/t.view.zoom,fillColor:"black",opacity:.12,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},visible:!0,guide:!0}),f.circle=new t.Path.Circle({center:new t.Point(0,0),radius:4/t.view.zoom,fillColor:new t.Color(s),data:{isScaleHandle:!1,isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},visible:!0,guide:!0}),w.removeChildren(),w.addChildren([f.shadow,f.circle]),v.strokeWidth=1/t.view.zoom,v.strokeColor=new t.Color(s),v.bringToFront(),w.bringToFront(),g("isGuideLayer").addChildren([v,w]),P=M.snapPoint.subtract(M.point);const e=null===(E=M.pos.match(/item_(\d+)_/))||void 0===E?void 0:E[1];if(e){const o=t.project.getItem({id:parseInt(e,10)});o&&(I=b(o))}if(M.point.equals(this.selectionCenter)&&"point"===M.snapPointType)D.fillColor=D.strokeColor=new t.Color(s);else switch(O(),M.snapPointType){case"point":w.visible=!0,w.position=M.snapPoint,w.bringToFront();break;case"xcoord":case"itemSideVert":v.firstSegment.point=new t.Point(M.snapPoint.x,j.top),v.lastSegment.point=new t.Point(M.snapPoint.x,j.bottom),v.visible=!0,v.bringToFront();break;case"ycoord":case"itemSideHoriz":v.firstSegment.point=new t.Point(j.left,M.snapPoint.y),v.lastSegment.point=new t.Point(j.right,M.snapPoint.y),v.visible=!0,v.bringToFront()}}}let A;for(const t of this.selectedItems)t.data.origPos||(t.data.origPos=t.position),P?t.position=t.data.origPos.add(P):e.modifiers.shift?t.position=t.data.origPos.add(c(S,Math.PI/4)):t.position=t.data.origPos.add(S),A=A?A.unite(t.bounds):t.bounds;this.firstDrag&&(u().visible=!0,this.firstDrag=!1);let k=1;if(p.y<A.top&&p.x<A.left||p.y>A.bottom&&p.x<A.left||p.y<A.top&&p.x>A.right||p.y>A.bottom&&p.x>A.right){const e=Math.max(p.x-A.right,A.left-p.x),o=Math.max(p.y-A.bottom,A.top-p.y),n=Math.sqrt(e*e+o*o);k=Math.max(0,1-n/(10/t.view.zoom))}else p.y<A.top||p.y>A.bottom?k=Math.max(0,1-(Math.abs(p.y-T.y)-A.height/2)/(10/t.view.zoom)):(p.x<A.left||p.x>A.right)&&(k=Math.max(0,1-(Math.abs(p.x-T.x)-A.width/2)/(10/t.view.zoom)));u().opacity=m*k}const S=y.constructor.prototype.onMouseDrag;y.constructor.prototype.onMouseDrag=j;const C=y.constructor.prototype.onMouseDown;y.constructor.prototype.onMouseDown=function(...t){y.constructor.prototype.onMouseDrag=n?j:S,C.apply(this,t)};const P=y.constructor.prototype.onMouseUp;y.constructor.prototype.onMouseUp=function(...t){var e;null===(e=x)||void 0===e||e(),P.apply(this,t)}});function C(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function P(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?C(Object(o),!0).forEach((function(e){z(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):C(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function z(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function T(t,e,o,n,a){const{view:{CENTER:s,ART_BOARD_BOUNDS:r}}=e;return P(P(P(P({},i.pageAxes?P(P({},n?{bounds_cx:{type:"xcoord",value:s.x}}:{}),a?{bounds_cy:{type:"ycoord",value:s.y}}:{}):{}),i.pageEdges?P(P(P(P({},n?{bounds_l:{type:"xcoord",value:r.left,clamp:{min:r.top,max:r.bottom}},bounds_r:{type:"xcoord",value:r.right,clamp:{min:r.top,max:r.bottom}}}:{}),a?{bounds_t:{type:"ycoord",value:r.top,clamp:{min:r.left,max:r.right}},bounds_b:{type:"ycoord",value:r.bottom,clamp:{min:r.left,max:r.right}}}:{}),n?{bounds_w:{type:"width",value:s.y,clamp:{min:r.left,max:r.right}}}:{}),a?{bounds_h:{type:"height",value:s.x,clamp:{min:r.bottom,max:r.top}}}:{}):{}),i.objectEdges?Object.fromEntries(o.filter(t=>!(t.selected||t.data.isHelperItem)).map(t=>[n&&["item_".concat(t.id,"_r"),{type:"xcoord",value:t.bounds.right}],n&&["item_".concat(t.id,"_l"),{type:"xcoord",value:t.bounds.left}],a&&["item_".concat(t.id,"_t"),{type:"ycoord",value:t.bounds.top}],a&&["item_".concat(t.id,"_b"),{type:"ycoord",value:t.bounds.bottom}],n&&["item_".concat(t.id,"_w"),{type:"width",value:t.bounds.bottom,clamp:{min:t.bounds.left,max:t.bounds.right}}],a&&["item_".concat(t.id,"_h"),{type:"height",value:t.bounds.left,clamp:{min:t.bounds.bottom,max:t.bounds.top}}]].filter(Boolean)).flat(1)):{}),i.objectMidlines?Object.fromEntries(o.filter(t=>!(t.selected||t.data.isHelperItem)).map(t=>[n&&["item_".concat(t.id,"_cx"),{type:"xcoord",value:t.bounds.center.x}],a&&["item_".concat(t.id,"_cy"),{type:"ycoord",value:t.bounds.center.y}]].filter(Boolean)).flat(1)):{})}const D=(t,e)=>{const o=M(t),{view:{getActionBounds:i},layer:{getLayer:a}}=o,l=(t=>t.boundingBoxTool._modeMap.SCALE)(e),c={endLeft:new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s),strokeWidth:1/t.view.zoom,visible:!0,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1}),endRight:new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s),strokeWidth:1/t.view.zoom,visible:!0,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1}),line:new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s),strokeWidth:1/t.view.zoom,visible:!0,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1}),group:new t.Group({children:[],visible:!1})},d={endLeft:new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s),strokeWidth:1/t.view.zoom,visible:!0,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1}),endRight:new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s),strokeWidth:1/t.view.zoom,visible:!0,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1}),line:new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s),strokeWidth:1/t.view.zoom,visible:!0,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1}),group:new t.Group({children:[],visible:!1})};c.endLeft.remove(),d.endLeft.remove(),c.endRight.remove(),d.endRight.remove(),c.line.remove(),d.line.remove(),c.group.remove(),d.group.remove(),c.group.addChildren([c.endLeft,c.line,c.endRight]),d.group.addChildren([d.endLeft,d.line,d.endRight]);let p=new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s),strokeWidth:1/t.view.zoom,visible:!1,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0,axis:"x"},selected:!1}),u=new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s),strokeWidth:1/t.view.zoom,visible:!1,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0,axis:"y"},selected:!1});p.remove(),u.remove();const m=["width","height","itemSideVert","itemSideHoriz","xcoord","ycoord","generated",void 0],g=()=>{c.group.remove(),c.group.visible=!1,d.group.remove(),d.group.visible=!1,p.remove(),p.visible=!1,u.remove(),u.visible=!1};l.constructor.prototype.onMouseDrag=function(e){if(!this.active)return;const l=e.point,b=i(this.isBitmap);l.x=Math.max(b.left,Math.min(l.x,b.right)),l.y=Math.max(b.top,Math.min(l.y,b.bottom)),this.lastPoint||(this.lastPoint=e.lastPoint);const h=l.subtract(this.lastPoint);this.lastPoint=l,e.modifiers.alt?(this.centered=!0,this.itemGroup.position=this.origCenter,this.pivot=this.origCenter):(this.centered&&(this.centered=!1,this.itemGroup.scale(1/this.lastSx,1/this.lastSy,this.pivot),this.selectionAnchor&&this.selectionAnchor.scale(this.lastSx,this.lastSy),this.lastSx=1,this.lastSy=1),this.pivot=this.origPivot),this.corner=this.corner.add(h);let y=this.corner.subtract(this.pivot);e.modifiers.alt&&(y=y.multiply(2));let v=1,f=1;Math.abs(this.origSize.x)>1e-7&&(v=y.x/this.origSize.x),Math.abs(this.origSize.y)>1e-7&&(f=y.y/this.origSize.y);const w=(t,e)=>{const o=m.indexOf(t.type)-m.indexOf(e.type);return o||t.distance-e.distance},M=a("isPaintingLayer"),I=n&&(this.isCorner&&!e.modifiers.shift||Math.abs(this.origSize.x)>1e-7),x=n&&(this.isCorner&&!e.modifiers.shift||Math.abs(this.origSize.y)>1e-7),j=r/t.view.zoom,N=t=>t.distance<j,L=([t,e])=>({type:e.type,distance:(()=>{switch(e.type){case"width":return Math.abs(Math.abs(y.x)-Math.abs(e.clamp.max-e.clamp.min));case"height":return Math.abs(Math.abs(y.y)-Math.abs(e.clamp.max-e.clamp.min));case"xcoord":case"itemSideVert":return Math.abs(this.corner.x-e.value);case"ycoord":case"itemSideHoriz":return Math.abs(this.corner.y-e.value)}})(),name:t,coord:e}),S=T(0,o,M.children,I,!1),C=Object.entries(S).map(L).filter(N).sort(w),P=T(0,o,M.children,!1,x),z=Object.entries(P).map(L).filter(N).sort(w),D=C[0],O=z[0],E=v>0?1:-1,A=f>0?1:-1;if(D)switch(D.type){case"width":v=new t.Point(Math.abs(D.coord.clamp.max-D.coord.clamp.min),this.corner.y).x/this.origSize.x;break;case"xcoord":case"itemSideVert":v=new t.Point(D.coord.value,this.corner.y).subtract(this.pivot).x/this.origSize.x,e.modifiers.alt&&(v*=2);break}if(O)switch(O.type){case"height":f=new t.Point(this.corner.x,Math.abs(O.coord.clamp.max-O.coord.clamp.min)).y/this.origSize.y;break;case"ycoord":case"itemSideHoriz":f=new t.Point(this.corner.x,O.coord.value).subtract(this.pivot).y/this.origSize.y,e.modifiers.alt&&(f*=2);break}const k=v,_=f;if(this.isCorner&&!e.modifiers.shift&&(v=f=Math.max(Math.abs(v),Math.abs(f)),v*=E,f*=A),v=E*Math.max(Math.abs(v),1e-4),f=A*Math.max(Math.abs(f),1e-4),this.itemGroup.scale(v/this.lastSx,f/this.lastSy,this.pivot),this.selectionAnchor&&this.selectionAnchor.scale(this.lastSx/v,this.lastSy/f),g(),(Math.abs(k)===Math.abs(v)&&D||Math.abs(_)===Math.abs(f)&&O)&&(p.strokeWidth=1/t.view.zoom,u.strokeWidth=1/t.view.zoom,p.strokeColor=new t.Color(s),u.strokeColor=new t.Color(s),c.endLeft.strokeWidth=1/t.view.zoom,d.endLeft.strokeWidth=1/t.view.zoom,c.endRight.strokeWidth=1/t.view.zoom,d.endRight.strokeWidth=1/t.view.zoom,c.line.strokeWidth=1/t.view.zoom,d.line.strokeWidth=1/t.view.zoom,c.endLeft.strokeColor=new t.Color(s),d.endLeft.strokeColor=new t.Color(s),c.endRight.strokeColor=new t.Color(s),d.endRight.strokeColor=new t.Color(s),c.line.strokeColor=new t.Color(s),d.line.strokeColor=new t.Color(s),p.bringToFront(),u.bringToFront(),a("isGuideLayer").addChildren([u,p,c.group,d.group])),Math.abs(k)===Math.abs(v)&&D)switch(D.type){case"width":{const e=D.coord.value,o=this.itemGroup.bounds.bottom;d.endLeft.firstSegment.point=new t.Point(D.coord.clamp.min,e),d.endLeft.lastSegment.point=new t.Point(D.coord.clamp.min,e+5/t.view.zoom),d.endRight.firstSegment.point=new t.Point(D.coord.clamp.max,e),d.endRight.lastSegment.point=new t.Point(D.coord.clamp.max,e+5/t.view.zoom),d.line.firstSegment.point=new t.Point(D.coord.clamp.min,e+3/t.view.zoom),d.line.lastSegment.point=new t.Point(D.coord.clamp.max,e+3/t.view.zoom),d.group.visible=!0,d.group.bringToFront(),c.endLeft.firstSegment.point=new t.Point(this.itemGroup.bounds.left,o+2/t.view.zoom),c.endLeft.lastSegment.point=new t.Point(this.itemGroup.bounds.left,o+7/t.view.zoom),c.endRight.firstSegment.point=new t.Point(this.itemGroup.bounds.right,o+2/t.view.zoom),c.endRight.lastSegment.point=new t.Point(this.itemGroup.bounds.right,o+7/t.view.zoom),c.line.firstSegment.point=new t.Point(this.itemGroup.bounds.left,o+4.5/t.view.zoom),c.line.lastSegment.point=new t.Point(this.itemGroup.bounds.right,o+4.5/t.view.zoom),c.group.visible=!0,c.group.bringToFront();break}case"xcoord":case"itemSideVert":p.firstSegment.point=new t.Point(D.coord.value,b.top),p.lastSegment.point=new t.Point(D.coord.value,b.bottom),p.visible=!0,p.bringToFront()}if(Math.abs(_)===Math.abs(f)&&O)switch(O.type){case"height":{const e=O.coord.value,o=this.itemGroup.bounds.left;d.endLeft.firstSegment.point=new t.Point(e,O.coord.clamp.min),d.endLeft.lastSegment.point=new t.Point(e-5/t.view.zoom,O.coord.clamp.min),d.endRight.firstSegment.point=new t.Point(e,O.coord.clamp.max),d.endRight.lastSegment.point=new t.Point(e-5/t.view.zoom,O.coord.clamp.max),d.line.firstSegment.point=new t.Point(e-3/t.view.zoom,O.coord.clamp.min),d.line.lastSegment.point=new t.Point(e-3/t.view.zoom,O.coord.clamp.max),d.group.visible=!0,d.group.bringToFront(),c.endLeft.firstSegment.point=new t.Point(o-2/t.view.zoom,this.itemGroup.bounds.top),c.endLeft.lastSegment.point=new t.Point(o-7/t.view.zoom,this.itemGroup.bounds.top),c.endRight.firstSegment.point=new t.Point(o-2/t.view.zoom,this.itemGroup.bounds.bottom),c.endRight.lastSegment.point=new t.Point(o-7/t.view.zoom,this.itemGroup.bounds.bottom),c.line.firstSegment.point=new t.Point(o-4.5/t.view.zoom,this.itemGroup.bounds.top),c.line.lastSegment.point=new t.Point(o-4.5/t.view.zoom,this.itemGroup.bounds.bottom),c.group.visible=!0,c.group.bringToFront();break}case"ycoord":case"itemSideHoriz":u.firstSegment.point=new t.Point(b.left,O.coord.value),u.lastSegment.point=new t.Point(b.right,O.coord.value),u.visible=!0,u.bringToFront()}this.lastSx=v,this.lastSy=f};const b=l.constructor.prototype.onMouseUp;l.constructor.prototype.onMouseUp=function(){g(),b.call(this)}};var O=o(1761);const E={"userscript.js":async function(t){const{addon:e}=t;e.self.addEventListener("disabled",u),e.self.addEventListener("reenabled",p),function({settings:t}){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&l(e,t.get(e));for(const e in a)Object.prototype.hasOwnProperty.call(a,e)&&c(e,t.get(e));d(t.get("threshold")),m(t.get("enable-default"))}(e);const o=await e.tab.traps.getPaper(),[s]=o.tools;m(e.settings.get("enable-default")),g(e.settings.get("guide-color")),e.settings.addEventListener("change",()=>g(e.settings.get("guide-color"))),(t=>"selectionBoxTool"in t&&"boundingBoxTool"in t)(s)&&(S(o,s),D(o,s)),function({addon:t,msg:e}){const o=()=>{const t=document.createElement("div");return t.className="sa-paint-snap-group",t},s=()=>{const t=document.createElement("div");return t.className="sa-paint-snap-settings-separator",t},p=({useButtonTag:t}={})=>{const e=document.createElement(t?"button":"span");return e.className="sa-paint-snap-button",e.setAttribute("role","button"),e},u=e=>{const o=document.createElement("img");return o.className="sa-paint-snap-image",o.draggable=!1,o.src=t.self.getResource("/icons/"+e+".svg"),o},g=o();t.tab.displayNoneWhileDisabled(g,{display:"flex"});const b=document.createElement("div");b.className="sa-paint-snap-settings-wrapper",g.appendChild(b);const h=document.createElement("div");h.className="sa-paint-snap-settings",b.appendChild(h);const y="http://www.w3.org/2000/svg",v=document.createElementNS(y,"svg");v.setAttribute("class","sa-paint-snap-settings-tip"),v.setAttribute("width","14"),v.setAttribute("height","7");const f=document.createElementNS(y,"polygon");f.setAttribute("class","sa-paint-snap-settings-polygon"),f.setAttribute("points","0,0 7,7, 14,0"),v.appendChild(f),h.appendChild(v);const w=p();w.addEventListener("click",()=>{n||(Object.values(i).some(t=>t)||l("pageCenter",!0),Object.values(a).some(t=>t)||c("boxCenter",!0)),m(!n),w.dataset.enabled=n}),w.title=e("toggle"),w.appendChild(u("snap")),w.dataset.enabled=n,g.appendChild(w);const M=p();M.addEventListener("click",()=>x(!j())),M.title=e("settings"),M.appendChild(u("settings")),g.appendChild(M);const I=[],x=t=>{M.dataset.enabled=t,h.dataset.visible=t,t?I.forEach(t=>{try{null==t||t()}catch(t){}}):(Object.values(a).every(t=>!t)||Object.values(i).every(t=>!t))&&(m(!1),w.dataset.enabled=!1)},j=()=>"true"===h.dataset.visible,N=(t,n,i,a=(()=>{}))=>{const s=[t,n],r=o(),l=p({useButtonTag:!0}),c=p({useButtonTag:!0}),d=u(t),m=u(n);d.dataset.shrink=m.dataset.shrink=!0,l.appendChild(d),c.appendChild(m),l.setAttribute("aria-label",l.title=e(t)),c.setAttribute("aria-label",c.title=e(n));const g=(t,e,o=!1)=>{l.dataset.enabled=!!t,c.dataset.enabled=!t,o||a(s[t])};return g(1-s.indexOf(i),0,!0),l.addEventListener("click",g.bind(l,1)),c.addEventListener("click",g.bind(c,0)),r.append(l,c),r},L=(t,o)=>{const n=document.createElement("label");n.className="sa-paint-snap-settings-line";const s=document.createElement("div");return s.className="sa-paint-snap-settings-label",s.textContent=e(t),n.append(s,o),I.push(()=>{const n=o.querySelector('[aria-label="'.concat(e("on"),'"]')),s=o.querySelector('[aria-label="'.concat(e("off"),'"]'));t in i&&(n.dataset.enabled=!!i[t],s.dataset.enabled=!i[t]),t in a&&(n.dataset.enabled=!!a[t],s.dataset.enabled=!a[t])}),n},S=(t,...e)=>{const o=document.createElement("div");o.className="sa-paint-snap-settings-section";const n=document.createElement("span");return n.appendChild(document.createTextNode(t)),n.className="sa-paint-snap-settings-section-title",o.appendChild(n),o.append(...e),o},C=L("threshold",((t,e=(()=>{}),n=-1/0,i=1/0,a=1)=>{const s=o(),r=document.createElement("div");r.style.width="20px";const l=p();l.appendChild(r);const c=document.createElement("input");c.className="sa-paint-snap-settings-input",c.type="number",c.step=a,c.min=n,c.max=i,c.value=t,c.addEventListener("change",()=>{c.value>i&&(c.value=i),c.value<n&&(c.value=n),e(c.value)}),c.addEventListener("blur",()=>{c.value||(c.value="0")}),l.appendChild(c);const d=p();d.appendChild(u("decrement")),d.addEventListener("click",()=>{c.value>n&&(c.value=Number(c.value)-1,e(Number(c.value)+1))});const m=p();return m.appendChild(u("increment")),m.addEventListener("click",()=>{c.value<i&&(c.value=Number(c.value)+1,e(Number(c.value)+1))}),s.append(d,l,m),s})(r,t=>{d(t)},4,50,1)),P=(t,e=(()=>{}))=>{return["off","on",(o=t,o?"on":"off"),t=>e(!!["on","off"].indexOf(t))];var o},z=t=>L(t,N(...P(i[t],e=>{m(!0),w.dataset.enabled=!0,l(t,e)}))),T=S(e("snapTo"),z("pageCenter"),z("pageAxes"),z("pageEdges"),z("pageCorners"),z("objectCenters"),z("objectMidlines"),z("objectEdges"),z("objectCorners")),D=t=>L(t,N(...P(a[t],e=>{c(t,e)}))),O=S(e("snapFrom"),D("boxCenter"),D("boxCorners"),D("boxEdgeMids"));h.append(C,s(),T,s(),O),(async()=>{let e=!1;for(;;){const o=(await t.tab.waitForElement("[class^='paint-editor_canvas-controls']",{markAsSeen:!0,reduxEvents:["scratch-gui/navigation/ACTIVATE_TAB","scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE","scratch-gui/targets/UPDATE_TARGET_LIST"],reduxCondition:t=>1===t.scratchGui.editorTab.activeTabIndex&&!t.scratchGui.mode.isPlayerOnly})).querySelector("[class^='paint-editor_zoom-controls']");if(t.tab.appendToSharedSpace({space:"paintEditorZoomControls",element:g,order:2}),!e){e=!0;const t=o.firstChild.className,n=o.firstChild.firstChild.className,i=o.firstChild.firstChild.firstChild.className;for(const e of document.querySelectorAll(".sa-paint-snap-group"))e.className+=" "+t;for(const t of document.querySelectorAll(".sa-paint-snap-button"))t.className+=" "+n;for(const t of document.querySelectorAll(".sa-paint-snap-image"))t.className+=" "+i}}})()}(t)},"userstyle.css":o.n(O).a,"icons/decrement.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUgMTEuMzU4aDE3LjUwMXYxLjI4NUgzLjI1eiIvPjwvc3ZnPg==","icons/increment.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUgMTEuMzU4aDE3LjUwMXYxLjI4NUgzLjI1eiIvPjxwYXRoIHRyYW5zZm9ybT0icm90YXRlKDkwKSIgc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUtMTIuNjQyaDE3LjUwMXYxLjI4NUgzLjI1eiIvPjwvc3ZnPg==","icons/off.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzU3NWU3NSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuNSIgZD0ibTExLjI1IDQuNzUtNi41IDYuNW0wLTYuNSA2LjUgNi41Ii8+PC9zdmc+","icons/on.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxwYXRoIGZpbGw9IiM1NzVlNzUiIGQ9Ik0xMi43MzYgMy45N2EuNzMzLjczMyAwIDAgMSAxLjA0NyAwYy4yODYuMjg5LjI5Ljc1Ni4wMSAxLjA1TDcuODggMTIuMDFhLjczMy43MzMgMCAwIDEtMS4wNjUuMDJMMy4yMTcgOC4zODRhLjc1Ny43NTcgMCAwIDEgMC0xLjA2LjczMy43MzMgMCAwIDEgMS4wNDcgMGwzLjA1MiAzLjA5MyA1LjQtNi40MjVhLjI0Ny4yNDcgMCAwIDEgLjAyLS4wMjJaIi8+PC9zdmc+","icons/settings.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PGNpcmNsZSBjeD0iMTIuNTUiIGN5PSIxMi41NSIgcj0iOS4wNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iNyIvPjxjaXJjbGUgY3g9IjYxLjk0MyIgY3k9IjYxLjQzNiIgcj0iNy41IiBmaWxsPSIjNTc1ZTc1Ii8+PHBhdGggZmlsbD0iIzU3NWU3NSIgZD0ibTUzLjExOSAyNy43NDMtOC4yNjcgOC4yNjZMMzEuNjkgMjIuODQ3bC04LjU3IDguNTczIDEzLjE2IDEzLjE2LTguMjY2IDguMjY2aDI1LjEwNXoiIGNvbG9yPSIjNTc1ZTc1Ii8+PHBhdGggZmlsbD0iIzU3NWU3NSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNDYuMjI3IDEwMGMuNTMtMy4yMDUgMS4yMTktNi4zNzQgMi4xMTItOS40N2wtNC44MDQtMS4zODZjLS45NTQgMy4zMS0xLjY4MyA2LjY2OS0yLjI0IDEwLjA0em0zLjYwMy0xNC4wNjhhNjMuOTM1IDYzLjkzNSAwIDAgMSAzLjkzLTguNzc1bC00LjM5My0yLjM4NmE2OC45MTcgNjguOTE3IDAgMCAwLTQuMjQgOS40NnptNi4zODItMTIuOWMxLjc1My0yLjY5NCAzLjY5LTUuMjQ5IDUuODQtNy41NzhsLTMuNjczLTMuMzkyYy0yLjM3MiAyLjU2OS00LjQ3NCA1LjM1LTYuMzU3IDguMjQxem05LjIzNC0xMC45NDFhNTcuOTUgNTcuOTUgMCAwIDEgNy42MDktNS44MTNsLTIuNzAzLTQuMjA4YTYyLjk0NCA2Mi45NDQgMCAwIDAtOC4yNjYgNi4zMTd6bTExLjc1Mi04LjI2MmE3MS4yNjUgNzEuMjY1IDAgMCAxIDguNzg2LTRsLTEuNzY2LTQuNjc3YTc2LjI0MiA3Ni4yNDIgMCAwIDAtOS40MDEgNC4yODF6bTEzLjM3Mi01LjU3MkE4Ny45MjYgODcuOTI2IDAgMCAxIDEwMCA0NS45MUw5OS4wNTcgNDFhOTIuOTM4IDkyLjkzOCAwIDAgMC05Ljk2NyAyLjQ4eiIgY29sb3I9IiM1NzVlNzUiLz48L3N2Zz4=","icons/snap.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiI+PHBhdGggZmlsbD0iIzU3NWU3NSIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMzIiIGQ9Ik0xOTEuOTggNDYzLjU4di00OE05MC4xNiA0MjEuNGwzMy45NC0zMy45NG0tNzYuMTItNjcuODhoNDgiLz48cGF0aCBmaWxsPSIjNTc1ZTc1IiBkPSJNNDIyLjIgODkuODJhMTQ0IDE0NCAwIDAgMC0yMDMuNzEtLjA3bC02Ny44OCA2Ny44OCA2Ny44OCA2Ny44OSA2Ny44OC02Ny44OWE0OCA0OCAwIDAgMSA2OC40Ni41OWMxOC4zIDE4LjkyIDE3LjQ4IDQ5LjI0LTEuMTQgNjcuODZsLTY3LjMyIDY3LjMyIDY3Ljg4IDY3Ljg4IDY2LjkxLTY2LjkxYzU2LjM3LTU2LjM3IDU3LjM3LTE0OC4xNSAxLjA0LTIwNC41NVpNODIuNzE5IDIyNS41MTdsNDUuMjU0LTQ1LjI1NCA2Ny44ODMgNjcuODgyTDE1MC42IDI5My40ek0yMTguNDkgMzYxLjI3bDQ1LjI1NC00NS4yNTQgNjcuODgyIDY3Ljg4Mi00NS4yNTUgNDUuMjU1eiIvPjwvc3ZnPg=="}}}]);